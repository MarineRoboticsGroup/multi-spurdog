<launch>
	<!--
		Launch a single estimator_node process that manages multiple agents.

		The node accepts a parameter '~agents' which may be either:
			- a YAML list string: "[\"actor_0\", \"actor_1\"]"
			- a comma-separated list: "actor_0,actor_1"

		Example:
			roslaunch spurdog_acomms estimators.launch agents:='["actor_0","actor_1"]'
			or
			roslaunch spurdog_acomms estimators.launch agents:='actor_0,actor_1'
	-->

	<arg name="agents" default="" />
	<arg name="estimator_rate" default="1.0" />
	<arg name="dimension" default="3" />

	<!-- Forward the agents arg and other config to the node via params/args -->
	<node pkg="spurdog_acomms" type="estimator_node.py" name="estimator_node" output="screen">
		<param name="agents" value="$(arg agents)"/>
		<param name="rate" value="$(arg estimator_rate)"/>
		<param name="dimension" value="$(arg dimension)"/>
		<!-- Also pass as argv in case the script expects args -->
		<arg name="agents_arg" value="$(arg agents)"/>
	</node>

</launch>
